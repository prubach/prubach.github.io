<section id="publications" class="section-block">
  <h2 class="section-title">Publications</h2>

  <div id="pub-list"></div>
  <h4>Download a list of my publications in the <a href="{{ '/assets/data/pawelrubach.bib' | relative_url }}">BIB format here</a></h4>
</section>

<script>
  const publications = {{ site.data.publications | jsonify }};
  const abstracts = {{ site.data.publications_figures | jsonify }};
  const pubList = document.getElementById("pub-list");

  let html = '<ul class="pub-container">';

  publications.forEach(p => {
    const formattedAuthors = p.authors.join(', ');

    // Try to find a matching graphical abstract
    const ga = abstracts.find(a => a.id === p.id);

    html += `
      <li class="pub-item">
        <span class="pub-title">${p.title}</span><br>
        <span class="pub-authors">${formattedAuthors}</span><br>
        ${p.journal ? `<span class="pub-journal">${p.journal}</span>` : ""}
        ${p.year ? `<span class="pub-year">${p.year}</span>` : ""}
        ${p.doi ? `<a class="pub-doi" href="https://doi.org/${p.doi}" target="_blank">DOI: ${p.doi}</a>` : ""}

        ${ga ? `
          <div class="pub-abstract-figure">
            <a href="${ga.url}" target="_blank">
              <img src="/assets/images/graph/${ga.file}" alt="Graphical abstract for ${p.title}">
            </a>
          </div>
        ` : ""}
      </li>
    `;
  });

  html += "</ul>";

  pubList.innerHTML = html;
</script>

<style>
  #publications .pub-container {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  /* Subtle modern bullet marker */
  .pub-item {
    opacity: 0.95;
    padding: 12px 0 12px 20px;
    position: relative;
    border-bottom: 1px solid rgba(0,0,0,0.06);
  }

  .pub-item::before {
    content: "â€¢";
    color: #7c9cc5;     /* Soft muted blue */
    font-size: 20px;
    position: absolute;
    left: 0;
    top: 10px;
  }

  .pub-title {
    font-weight: 700;
    font-size: 1.05em;
    color: #111;
  }

  .pub-authors {
    font-size: 0.92em;
    color: #666;
  }

  .pub-journal {
    font-style: italic;
    font-weight: 700;
    font-size: 0.92em;
    color: #555;
  }

  .pub-year {
    font-size: 0.9em;
    font-weight: 600;
    color: #333;
  }

  .pub-doi {
    font-size: 0.85em;
    color: #5a6b85;
    text-decoration: none;
  }

  .pub-doi:hover {
    text-decoration: underline;
  }

  .pub-abstract-figure {
    margin-top: 10px;
    text-align: left;
  }

  .pub-abstract-figure img {
    max-width: 400px;
    border-radius: 6px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    transition: transform 0.2s ease;
  }

  .pub-abstract-figure img:hover {
    transform: scale(1.03);
  }
</style>

